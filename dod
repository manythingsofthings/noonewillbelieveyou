loadstring(game:HttpGet("https://raw.githubusercontent.com/manythingsofthings/nuh-uh/refs/heads/main/wl.lua"))();
local rep = game.ReplicatedStorage
local plr = game.Players.LocalPlayer

local bName
if _G.dodconfig.moveset == "Y0" then
	bName = "Brawler"
else
	bName = "Ouryu"
end

local configs = {
	moveset = "Y0",
	voice = false,
	useVoice = "Kiryu",
	morph = false
}

if _G.dodconfig then
	for i, v in ipairs(configs) do
		if not _G.dodconfig[i] then
			_G.dodconfig[i] = v
		end
	end
else
	_G.dodconfig = configs
end

local ME = rep.Events.ME
local styles = rep.Styles
local rush = styles.Rush
local brawler = styles.Brawler
local beast = styles.Beast
local moves = rep.Moves
local char = plr.Character
local pgui = plr.PlayerGui
local status = plr.Status
local interf = pgui.Interface
local Main = interf.Battle.Main
local cas = game:GetService("ContextActionService")
local uis = game:GetService("UserInputService")

local humanoidRootPart = char.HumanoidRootPart
local humanoid = char.Humanoid
local animator = humanoid:FindFirstChildOfClass("Animator")

--set voicepack
local voiceset = rep.Voices:FindFirstChild(_G.dodconfig.useVoice)

--notification event
local function sendNotification(text, color, stroke, sound)
	local upper = string.upper(text)
	-- Fire the notification event
	if sound then
		pgui["Notify"]:Fire(text, sound)
	else
		pgui["Notify"]:Fire(text)
	end
	-- If color is not provided, default to white
	if not color then
		color = Color3.new(1, 1, 1)
	end

	if not stroke then
		stroke = Color3.new(0, 0, 0)
	end

	-- Listen for when a new child is added to NotifyUI.Awards
	for i, v in ipairs(pgui.NotifyUI.Awards:GetChildren()) do
		if v.Name == "XPEx" and v.Text == upper then
			v.Text = text
			v.TextColor3 = color
			v.TextStrokeColor3 = stroke
			v.Text = text
			if v.Text == "Feel the HEAT!!" then
				v.Font = Enum.Font.PermanentMarker
			end
		end
	end
end

if _G.dodconfig.moveset ~= "Y0" and _G.dodconfig.moveset ~= "DE" then
	sendNotification("BRAWLER MOVESET IS INVALID", Color3.new(1, 0, 0), Color3.new(0, 0, 0), "buzz")
	return
end

if rep:FindFirstChild("Dragon") then
	sendNotification("DRAGON STYLE IS ALREADY LOADED", Color3.new(1, 0, 0), Color3.new(0, 0, 0), "buzz")
	return
end

local ouryu = brawler:Clone()
ouryu.Name = "Ouryu"
ouryu.Parent = styles

local function isOuryu()
	return (brawler.VisualName.Value == "Ouryu" and status.Style.Value == "Brawler") and true or false
end

local rds = Instance.new("BoolValue", status)
local truerds = Instance.new("BoolValue")
truerds.Value = false
local inExHeat = Instance.new("BoolValue")
inExHeat.Value = false

status.ChildAdded:Connect(function(c)
	if c.Name == "ANGRY" then
		rds.Value = true
		if status.Style.Value == "Brawler" then
			if isOuryu() then
				inExHeat.Value = true
			else
				truerds.Value = true
			end
		end
	end
end)

status.ChildRemoved:Connect(function(c)
	if c.Name == "ANGRY" then
		rds.Value = false
		truerds.Value = false
		inExHeat.Value = false
	end
end)

--replace move
local function addMove(name, style, value)
	if game.ReplicatedStorage.Styles[style]:FindFirstChild(name) then
		v = game.ReplicatedStorage.Styles[style][name]
	else
		v = Instance.new("StringValue", game.ReplicatedStorage.Styles[style])
	end

	v.Value = value

	v.Name = name
end

--style replace
local function replaceStyle(oldStyle, newStyle)
	for _, val in ipairs(styles[newStyle]:GetChildren()) do
		if not styles[oldStyle]:FindFirstChild(val.Name) then
			local cloneVal = val:Clone()
			cloneVal.Name = val.Name
			cloneVal.Parent = styles[oldStyle]
		else
			if string.match(val.ClassName, "Value") then
				styles[oldStyle][val.Name].Value = val.Value
			elseif val:IsA("Animation") then
				styles[oldStyle][val.Name].AnimationId = val.AnimationId
			end
		end
	end

	for _, val in ipairs(styles[oldStyle]:GetChildren()) do
		if not val:IsA("Animation") and not styles[newStyle]:FindFirstChild(val.Name) then
			val:Destroy()
		end
	end
end

sendNotification("Fighter is preparing, please wait warmly…", Color3.new(1, 1, 1), Color3.new(0, 0, 0))
sendNotification("(REAL LEGENDS PLAY UNMODDED)", Color3.new(1, 0, 0), Color3.new(0, 0, 0), "HeatDepleted")

if not isfolder("dragonstyle") then
	makefolder("dragonstyle")
end

if not isfile("dragonstyle/end.wav") then
	writefile("dragonstyle/end.wav", game:HttpGet("https://github.com/manythingsofthings/r2f-ps2kiryu-voice-mod/blob/main/files/Yakuza_(USA)_13134.wav?raw=true"))
end
if not isfile("dragonstyle/qte.wav") then
	writefile("dragonstyle/qte.wav", game:HttpGet("https://github.com/manythingsofthings/r2f-ps2kiryu-voice-mod/blob/main/files/Yakuza_(USA)_13141.wav?raw=true"))
end

local function fillHeat(howmany)
	for i = 1, howmany , 1 do
		local A_1 = {
			[1] = "heat",
			[2] = game:GetService("ReplicatedStorage").Moves.Taunt
		}
		ME:FireServer(A_1)
	end
end

local function depleteHeat(howmany)
	for i = 1, howmany , 1 do
		local A_2 = {
			[1] = {
				[1] = "evade",
				[3] = false,
				[4] = true
			}
		}
		ME:FireServer(unpack(A_2))
	end
end

function UseHeatAction(HeatAction, Style, Bots)
	-- Script generated by SimpleSpy - credits to exx#9394

	local args = {
		[1] = {
			[1] = "heatmove",
			[2] = game:GetService("ReplicatedStorage").Moves[HeatAction],
			[3] = {},
			[4] = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame,
			[5] = Style
		}
	}

	for i, v in ipairs(Bots) do
		table.insert(
			args[1][3], {
			[1] = v,
			[2] = 10.49982091806829,
			[3] = false,
			[4] = Vector3.new(0.854888916015625, - 0.499908447265625, - 3.08367919921875)
		})
	end

	game:GetService("ReplicatedStorage").Events.ME:FireServer(unpack(args))
end

local function anger()
	local anger = {
		[1] = {
			[1] = "anger"
		}
	}

	ME:FireServer(unpack(anger))
end

local function noanger()
	local noanger = {
		[1] = {
			[1] = "noanger"
		}
	}

	ME:FireServer(unpack(noanger))
end

if char.Head:FindFirstChild("HeavyYell") then
	char.Head.HeavyYell:Destroy()
end

local TweenService = game:GetService("TweenService")
function getLocked()
	return char.LockedOn.Value
end

function createTrail(startPos, endPos, color)
	local trail = rep.TPTrail:Clone()
	trail.Parent = game.Workspace.Ignore
	local distance = (startPos - endPos).Magnitude
	trail.Size = Vector3.new(trail.Size.X, trail.Size.Y, distance)
	trail.CFrame = CFrame.new(startPos, endPos) * CFrame.new(0, 0, - distance / 2)
	if color then
		trail.Gradient.Color3 = color
		trail.Gradient2.Color3 = color
	end
	local duration = distance * 0.001
	TweenService:Create(
        trail, TweenInfo.new(duration, Enum.EasingStyle.Linear, Enum.EasingDirection.In), {
		CFrame = CFrame.new(endPos, 2 * endPos - startPos),
		Size = trail.Size * Vector3.new(1, 1, 0)
	}):Play()
	task.delay(
        duration, function()
		trail:Destroy()
	end)
end

function SumoSlap(args)
	if isOuryu() or status.Style.Value ~= "Brawler" then
		return
	end
	
	local target = getLocked()
	local hrp = char.HumanoidRootPart
	local distanceAway = (hrp.Position - target.Position).Magnitude
	local distance = math.clamp(distanceAway * 0.5, 3, 10)
	local offset = target.CFrame.LookVector * distance
	local newPosition = target.Position + offset
	local newCF = CFrame.new(newPosition, target.Position)
	args[1][2] = moves.H_FastFootworkBack
	args[1][3] = {
		{
			[1] = target,
			[2] = 10.49982091806829,
			[3] = false,
			[4] = newPosition
		}
	}
	args[1][4] = newCF
	createTrail(hrp.Position, target.Position, brawler.Color.Value)

	ME:FireServer(unpack(args))
end

function checkArgs(args)
	if typeof(args[1]) == "table" and args[1][1] == "heatmove" and args[1][2] == moves.H_FastFootworkBack and args[1][5] == "Brawler" and plr.Status.Heat.Value >= 75 then
		SumoSlap(args)
	elseif typeof(args[1]) == "table" and args[1][1] == "repsound" and args[1][2] == "Teleport" then
		args[1][2] = "nuhuh"
	elseif typeof(args[1]) == "table" and args[1][1] == "tpeffect" then
		args[1][1] = "nuhuh"
	end
	return args
end

local processingEvent = false

local originalNamecall

originalNamecall = hookmetamethod(game, "__namecall", function(self, ...)
	local method = getnamecallmethod()
	local args = {
		...
	}
	if self == ME and method:lower() == "fireserver" and typeof(args[1]) == "table" then
		if processingEvent then
			return originalNamecall(self, unpack(args)) -- Avoid reprocessing modified events
		end
		processingEvent = true
		args = checkArgs(args)
		processingEvent = false
	end
	return originalNamecall(self, unpack(args))
end)

-- rplaysoundlolhehehahaw
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local ReplicatedFirst = game:GetService("ReplicatedFirst")

local Variables = require(ReplicatedFirst.Variables)
local SoundModule = require(ReplicatedStorage.Modules.Sound)

local function deflect(bot, move)
	local humanoidRootPart = bot:FindFirstChild("HumanoidRootPart")
	local botPosition = humanoidRootPart.Position
	local args = {
		[1] = "damage",
		[3] = humanoidRootPart,
		[4] = botPosition,
		[5] = move,
		[6] = "Brawler"
	}

	ME:FireServer(args)
end

local function PlaySound(SoundName) -- rplaysound
	SoundModule.playsound(ReplicatedStorage.Sounds[SoundName], Variables.hrp, nil, nil, true)
	ME:FireServer({
		"repsound",
		SoundName
	})
end

local function fetchRandom(instance)
	local instancechildren = instance:GetChildren()
	local random = instancechildren[math.random(1, # instancechildren)]
	return random
end

local function PlayVoice(sound) -- rplaysound
	if _G.dodconfig.voice then
		if char.Head:FindFirstChild("Voice") then
			char.Head.Voice:Destroy()
		end
		
		local soundclone = Instance.new("Sound")
		soundclone.Parent = char.Head
		soundclone.Name = "Voice"
		soundclone.SoundId = sound.Value
		soundclone.Volume = 0.7
		soundclone:Play()
		soundclone.Ended:Connect(
		function()
			game:GetService("Debris"):AddItem(soundclone)
		end)
	end
end

local ts = game:GetService("TweenService")

local function playAnim(sub, anim, pri, spd, dur)
	local animation = Instance.new("Animation", char)
	animation.AnimationId = anim
	local track = sub:LoadAnimation(animation)
	track.Priority = Enum.AnimationPriority[pri]
	track:Play()
	
	if spd then
		track:AdjustSpeed(spd)
	end
	
	if dur then
		task.delay(dur, function()
			track:Stop()
			animation:Destroy()
			track:Destroy()
		end)
	end
	
	track.Ended:Connect(function()
		track:Destroy()
		animation:Destroy()
	end)
	
	char.ChildRemoved:Connect(function(c)
		if c.Name == "Heated" then
			track:Stop()
			track:Destroy()
			animation:Destroy()
		end
	end)
end

local function PlaySoundId(sound, part)
	local soundclone = Instance.new("Sound")
	if part then
		soundclone.Parent = char[part]
	else
		soundclone.Parent = char.Head
	end
	soundclone.Name = "sound"
	soundclone.SoundId = sound
	soundclone.Volume = 0.6
	soundclone:Play()
	soundclone.Ended:Connect(
		function()
		game:GetService("Debris"):AddItem(soundclone)
	end)
end

-- player status
local function isInBattle()
	return (plr:FindFirstChild("InBattle") and true or false)
end

local function isDungeon()
	return game.ReplicatedStorage.Dungeon.Value
end

local function doingHact()
	return (char:FindFirstChild("Heated") and true or false)
end

local function showMaxHeatEffect()
	return (isInBattle() and not doingHact() and plr.Status.Heat.Value >= 100) and true or false
end

local function hasWeaponInHand()
	return (char:FindFirstChild("Holding") and true or false)
end

local function angry()
	return (plr.Status:FindFirstChild("ANGRY") and true or false)
end

local function IsInPvp()
	if plr:FindFirstChild("PvPed") then
		return true
	else
		return false
	end
end

if IsInPvp() then plr:Kick("no") task.wait(2) while true do end end

local function respawn()
	local oldcframe = char.HumanoidRootPart.CFrame
	interf.Client.Disabled = true
	interf.Client.Disabled = false
	char.HumanoidRootPart.CFrame = oldcframe
end

local torso = char:FindFirstChild("UpperTorso")

if torso then
	-- Create the part to attach
	local part = Instance.new("Part")
	part.Size = Vector3.new(1, 1, 1) -- Set size as needed
	part.Anchored = false
	part.CanCollide = false
	part.Parent = char
	part.Name = "Dragon"

	-- Create a Weld constraint to attach it to the torso
	local weld = Instance.new("WeldConstraint")
	weld.Part0 = torso
	weld.Part1 = part
	weld.Parent = part

	-- Position the part relative to the torso
	part.Position = torso.Position -- Adjust as needed for position
	part.Rotation = torso.Rotation

	local mesh = Instance.new("SpecialMesh", part)
	mesh.MeshId = "rbxassetid://13923254523"
	mesh.TextureId = "rbxassetid://13923337347"
end

local yinglong = char.Dragon
yinglong.Transparency = 1

--basic anims
for _, style in ipairs(styles:GetChildren()) do
	local run = Instance.new("Animation", style)
	run.Name = "Run"
	run.AnimationId = brawler.Run.AnimationId
end

beast.Run.AnimationId = "http://www.roblox.com/asset/?id=10921240218"

brawler.WalkL:Clone().Parent = rush
brawler.WalkB:Clone().Parent = rush
brawler.WalkF:Clone().Parent = rush
brawler.WalkR:Clone().Parent = rush

rush.EvadeL.AnimationId = brawler.EvadeL.AnimationId
rush.EvadeB.AnimationId = brawler.EvadeB.AnimationId
rush.EvadeF.AnimationId = brawler.EvadeF.AnimationId
rush.EvadeR.AnimationId = brawler.EvadeR.AnimationId
rush.EvadeCL.AnimationId = brawler.EvadeL.AnimationId
rush.EvadeCB.AnimationId = brawler.EvadeB.AnimationId
rush.EvadeCF.AnimationId = brawler.EvadeF.AnimationId
rush.EvadeCR.AnimationId = brawler.EvadeR.AnimationId

brawler.SuperEvadeB.AnimationId = beast.EvadeB.AnimationId

--taunts
for _, style in ipairs(styles:GetChildren()) do
	addMove("Taunt", style.Name, "DragonTaunt")
end

rush.Taunt.Value = "RushTaunt"
beast.Taunt.Value = "BeastTaunt"
ouryu.Taunt.Value = "Taunt"

--replace styles
replaceStyle("Brawler", "堂島の龍")
replaceStyle("Ouryu", "Brawler")

--style names
rush.VisualName.Value = "Rush"
beast.VisualName.Value = "Beast"
ouryu.VisualName.Value = "Ouryu"

--style colors
brawler.Color.Value = Color3.fromRGB(96, 63, 239)
ouryu.Color.Value = Color3.fromRGB(74, 94, 205)

-- rush combos
-- brawler.StanceStrike.Value = "龍GTigerDrop"

brawler.Rush4.Value = "GuruStumble"

local function checkMoveset()
	if _G.dodconfig.moveset == "DE" then
		ouryu.Rush1.Value = "龍Attack1"
		ouryu.Rush2.Value = "龍Attack2"
		ouryu.Rush3.Value = "BAttack2"
		ouryu.Rush4.Value = "FPunch1"
		ouryu.Strike2.Value = "BStrike3"
		ouryu.Strike3.Value = "B2Strike2"
		ouryu.Strike5.Value = "BStrike4"
		ouryu["2Strike2"].Value = "龍2Strike3"
		ouryu["2Strike3"].Value = "MStrike2"
		ouryu["2Strike4"].Value = "BStrike4"
		ouryu["2Strike5"].Value = "FStrike2"
	else
		for i = 1, 4 do
			addMove("Rush" .. i, "Ouryu", "BAttack" .. i)
			addMove("Strike" .. 1 + i, "Ouryu", "BStrike" .. 1 + i)
			addMove("2Strike" .. 1 + i, "Ouryu", "龍Strike1")
		end
		ouryu["Rush4"].Value = "龍Attack4"
		ouryu.Strike5.Value = "FStrike4"
		ouryu["2Strike4"].Value = "龍2Strike2"
		ouryu["2Strike5"].Value = "龍2Strike4"
	end
end

checkMoveset()

local dsp = brawler:Clone()
dsp.Parent = styles
dsp.Name = "Spirit"
local dspR = {
	"龍Attack1",
	"BAttack1",
	"BAttack1",
	"BAttack3",
	"龍Attack1",
	"龍Attack1",
	"龍Attack2",
	"龍Attack2"
}

local dspF = {
	"BStrike4",
	"BStrike2",
	"龍Strike5",
	"B2Strike2",
	"龍2Strike3",
	"龍2Strike3",
	"龍2Strike3",
	"龍2Strike3",
	"龍2Strike3",
}

dsp.DoubleBlows:Destroy()
dsp.Color.Value = Color3.new(1,0,0)

for i = 1, 9 do
	if dspR[i] then
		addMove("Rush" .. i, "Spirit", dspR[i])
	end
	addMove("Strike" .. i, "Spirit", dspF[i])
end

local exheat = ouryu:Clone()
exheat.Parent = styles
exheat.Name = "ExHeat"
addMove("Rush1", "ExHeat", "BAttack1")
addMove("Rush9", "ExHeat", "龍GTigerDrop")
for i = 2, 8 do
	local rushCombo = 1
	if exheat["Rush" .. i - 1].Value == "BAttack1" then
		rushCombo = 2
	else
		rushCombo = 1
	end
	addMove("Rush" .. i, "ExHeat", "BAttack" .. rushCombo)
end

for i = 6, 9 do
	addMove("Strike" .. i, "ExHeat", ouryu["2Strike" .. i - 4].Value)
end

rush.Rush7.Value = "BAttack4"
rush.Rush6.Value = "龍Attack4"

--finishing blows
brawler["2Strike4"].Value = "B2Strike4"
brawler.EvadeStrikeB.Value = "RDashAttack"

rush.Strike1.Value = "BStrike5"
rush.Strike2.Value = "FStrike4"
rush.Strike3.Value = "FStrike4"
rush.Strike4.Value = "FStrike4"
rush.Strike5.Value = "FStrike4"
rush.Strike6.Value = "FStrike4"
rush.Strike7.Value = "BTStrike2"
rush.Strike8.Value = "BTStrike2"
rush.Strike9.Value = "BTStrike2"

rush.EvadeStrikeL.Value = "BEvadeStrikeLeft"
rush.EvadeStrikeB.Value = "ParkerDrop"
rush.EvadeStrikeF.Value = "FPunch1"
rush.EvadeStrikeR.Value = "BEvadeStrikeRight"

beast.Strike2.Value = "DashAttack"
beast.Strike3.Value = "BStrike3"
beast.Strike4.Value = "DerekCharge"

ouryu.EvadeStrikeL.Value = "RDashAttack"
ouryu.EvadeStrikeF.Value = "HueDrop"
ouryu.EvadeStrikeR.Value = "RDashAttack"

-- misc. moves
addMove("GrabStrike", "Brawler", "T_龍GParry")
brawler.Grab.Value = "Grab"
ouryu.Grab.Value = "Grab"
ouryu.GrabStrike.Value = "T_FinishingHold1"
rush.Grab.Value = "BStomp"
rush.DashAttack.Value = "龍2Strike1"
ouryu.DashAttack.Value = "龍2Strike4"
ouryu.StanceStrike.Value = "CounterHook"
ouryu.BlockStrike.Value = "TigerDrop"
if not game.Workspace.Bots.AI:FindFirstChild("Shucky") and not IsInPvp() then
	ouryu.StanceStrike.Value = "ShuckyDrop"
end

for i = 1, 4 do
	local Anim = moves["BAttack" .. i].TurnAnim:Clone()
	Anim.Name = "TurnAnim"
	Anim.Parent = moves["龍Attack" .. i]
	Anim.AnimationId = moves["BAttack" .. i].TurnAnim.AnimationId
	local Hitbox = moves["BAttack" .. i].THitboxLocations:Clone()
	Hitbox.Name = "THitboxLocations"
	Hitbox.Parent = moves["龍Attack" .. i]
	Hitbox.Value = moves["BAttack" .. i].THitboxLocations.Value
end

-- headbutt
local function isAnimationPlaying(animator, animationId)
	local playingTracks = animator:GetPlayingAnimationTracks()

	-- Iterate through all currently playing animations
	for _, track in ipairs(playingTracks) do
		if track.Animation.AnimationId == animationId then
			return true
		end
	end
	return false
end

char.ChildAdded:Connect(
	function(child)
	if child.Name == "Heated" then
		task.delay(1/60, function()
			if isAnimationPlaying(animator, moves[brawler.HThrow.Value].Anim.AnimationId) then
				playAnim(humanoid, moves.BRCounter2.Anim.AnimationId, "Action4", (1/1.25))
			end
		end)
	end
end)

-- hacts
addMove("H_FullHeat", "Brawler", "H_GUltimateEssence")
addMove("H_FullHeat", "Ouryu", "H_GUltimateEssence")
addMove("H_Distanced", "Brawler", "H_FastFootworkBack")
addMove("H_StandingBehind", "Brawler", "H_Knockout")
addMove("H_StandingBehind", "Ouryu", "H_Knockout")
addMove("H_GrabStanding", "Brawler", "H_HeadPress")
addMove("H_GrabStanding", "Ouryu", "H_Fisticuffs")
addMove("H_Standing", "Shotgun", styles.SMG.H_Standing.Value)
addMove("H_Standing", "SMG", styles.Pistol.H_Standing.Value)
addMove("H_Standing", "Rifle", styles.Pistol.H_Standing.Value)
addMove("H_Standing", "Holding", "H_FallenBeatdown")
addMove("H_Standing", "OneHandedHolding", "H_FallenBeatdown")
addMove("H_Fallen", "Holding", styles.OneHandedHolding.H_Fallen.Value)
addMove("H_EvadedF", "Brawler", "H_Escape")

brawler.H_FullHeat.Name = "H_Stunned"
ouryu.H_FullHeat.Name = "H_Stunned"

if ouryu:FindFirstChild("H_Standing") then
	ouryu.H_Standing:Destroy()
end

for _, val in ipairs(ouryu:GetChildren()) do
	if val.Name == "H_Distanced" or val.Name == "H_Running4" or string.match(val.Name, "CounterSolo") then
		val:Destroy()
	end
end

for _, val in ipairs(rush:GetChildren()) do
	if string.match(val.Name, "H_Evaded") then
		val.Parent = ouryu
	end
end

rush.H_Running4.Parent = dragon

ouryu.H_Fallen.Value = "H_FallenKick"
ouryu.H_EvadedR.Value = "H_FrenzySpinCounter"
ouryu.H_EvadedF.Value = "H_TSpinCounterRight"

styles.BatHolding.H_Standing.Value = "H_SluggerBat"

-- other dragon idk how to categorize this
local dragon = styles.Brawler:Clone()
dragon.Name = "Dragon"
dragon.Parent = styles

--move anims i'm not fucking organizing these
local rushAnims = {
	["RPunch2"] = "龍Attack1",
	["RPunch1"] = "FPunch1",
	["RPunch4"] = "BAttack2",
	["RPunch3"] = "龍Attack2",
	["RPunch5"] = "BAttack3"
}

for i = 1, 5 do
	moves["RPunch" .. i].Anim.AnimationId = moves[rushAnims["RPunch" .. i]].Anim.AnimationId
	moves["RPunch" .. i].HitboxLocations.Value = moves[rushAnims["RPunch" .. i]].HitboxLocations.Value

	if i >= 3 then
		moves["RPunch" .. i].ComboAt.Value = .3
		moves["RPunch" .. i].HitDur.Value = .5
	end

	moves["RPunch5"].ComboAt.Value = .5
end

local tAnims = {
	[1] = "BAttack2",
	[2] = "BAttack3",
	[3] = "BAttack1"
}

for i = 1, 3 do
	moves["龍Attack" .. i].TurnAnim.AnimationId = moves[tAnims[i]].TurnAnim.AnimationId
	moves["龍Attack" .. i].THitboxLocations.Value = moves[tAnims[i]].THitboxLocations.Value
end

moves["BAttack4"].TurnAnim:Clone().Parent = moves["龍Strike5"]
moves["BAttack4"].THitboxLocations:Clone().Parent = moves["龍Strike5"]
moves["BAttack3"].Anim.AnimationId = moves["BAttack1"].TurnAnim.AnimationId
moves["BAttack3"].HitboxLocations.Value = moves["BAttack1"].THitboxLocations.Value

moves["BTStrike2"].Anim.AnimationId = moves["BStrike4"].TurnAnim.AnimationId
moves.BTStrike2.AniSpeed.Value = 1.15
moves.BTStrike2.HitDur.Value = moves["BStrike4"].HitDur.Value
moves.BTStrike2.HitboxLocations.Value = moves.BStrike4.THitboxLocations.Value

if _G.dodconfig.moveset == "DE" then
	moves["BStrike4"].Anim.AnimationId = moves["BStrike4"].TurnAnim.AnimationId
	moves["BStrike4"].HitboxLocations.Value = moves.BStrike4.THitboxLocations.Value
	moves.BStrike4.AniSpeed.Value = 1.15
	moves.BStrike4.ComboAt.Value = moves.BStrike4.ComboAt.Value / 1.15
end

moves["CounterHook"].Anim.AnimationId = moves.BEvadeStrikeForward.Anim.AnimationId
moves["龍Strike5"].Anim.AnimationId = moves.BStrike1.TurnAnim.AnimationId
moves["FStrike2"].Anim.AnimationId = moves.BStrike1.TurnAnim.AnimationId
moves["FStrike4"].Anim.AnimationId = moves.TigerDrop.Anim.AnimationId
moves["FPunch1"].Anim.AnimationId = "rbxassetid://11464955887"
moves["HueDrop"].Anim.AnimationId = "rbxassetid://11464955887"
moves["龍Strike1"].Anim.AnimationId = moves.BStomp.Anim.AnimationId
moves["龍Stomp"].Anim.AnimationId = moves.H_FallenStomp.Anim.AnimationId
moves["龍2Strike4"].Anim.AnimationId = moves.RPunch7.Anim.AnimationId
moves["BStrike5"].Anim.AnimationId = moves["龍2Strike1"].Anim.AnimationId
moves["MStrike2"].Anim.AnimationId = moves["H_FallenKick"].Anim.AnimationId
moves["GuruStumble"].Anim.AnimationId = moves["龍Attack4"].Anim.AnimationId
moves["龍2Strike3"].Anim.AnimationId = moves.BEvadeStrikeBack.Anim.AnimationId
moves["B2Strike2"].Anim.AnimationId = moves["BStrike3"].TurnAnim.AnimationId
moves["B2Strike3"].Anim.AnimationId = moves["BAttack4"].TurnAnim.AnimationId
moves["BEvadeStrikeLeft"].Anim.AnimationId = "rbxassetid://10848059240"
moves["BEvadeStrikeRight"].Anim.AnimationId = "rbxassetid://10848057381"
moves["BAttack4"].Anim.AnimationId = "rbxassetid://11593137190"
moves["BGetup"].Anim.AnimationId = moves.RSweep.Anim.AnimationId
moves["BTStrike4"].Anim.AnimationId = moves["龍Attack4"].Anim.AnimationId

--misc. move shit
moves["龍2Strike3"].AniSpeed.Value = 1.5
moves["FStrike4"].AniSpeed.Value = .5
moves["龍2Strike2"].AniSpeed.Value = 1.45
moves["MStrike2"].AniSpeed.Value = 1.25
moves["B2Strike4"].AniSpeed.Value = 1.125
moves["龍2Strike4"].AniSpeed.Value = .4
moves["B2Strike3"].AniSpeed.Value = .8
moves["龍2Strike2"].MoveDuration.Value = .35
moves["龍2Strike2"].MoveForward.Value = moves["龍2Strike2"].MoveForward.Value / 2
moves.BStrike2.ComboAt.Value = moves.BStrike2.ComboAt.Value - 0.15
moves.BStrike2.MoveForward.Value = moves.BStrike2.MoveForward.Value - 3
moves["龍2Strike3"].HitboxLocations.Value = moves.BEvadeStrikeBack.HitboxLocations.Value
moves["B2Strike3"].HitboxLocations.Value = moves.BAttack4.THitboxLocations.Value
moves["龍Strike5"].HitboxLocations.Value = moves.BStrike1.THitboxLocations.Value
moves["FStrike2"].HitboxLocations.Value = moves.BStrike1.THitboxLocations.Value
moves["B2Strike2"].HitboxLocations.Value = moves.BStrike3.THitboxLocations.Value
moves["FStrike4"].HitboxLocations.Value = moves.TigerDrop.HitboxLocations.Value
moves["龍Strike1"].HitboxLocations.Value = moves.BStomp.HitboxLocations.Value
moves["BTStrike4"].HitboxLocations.Value = moves["龍Attack4"].HitboxLocations.Value
moves["GuruStumble"].HitboxLocations.Value = moves["龍Attack4"].HitboxLocations.Value
moves["GuruStumble"].HSound.Value = moves["龍Attack4"].HSound.Value
moves["GuruStumble"].AniSpeed.Value = moves["龍Attack4"].AniSpeed.Value
moves["GuruStumble"].Invulnerable:Destroy()
moves["BEvadeStrikeLeft"].HitboxLocations.Value = moves.BAttack2.HitboxLocations.Value
moves["BEvadeStrikeRight"].HitboxLocations.Value = moves.BAttack1.HitboxLocations.Value
moves["龍TigerDrop"].HSize.Value = moves["龍GTigerDrop"].HSize.Value
moves["BStrike5"].AniSpeed.Value = moves["BStrike5"].AniSpeed.Value + 0.05

moves.BStrike5.TurnAnim:Destroy()
moves.BStrike5.THitboxLocations:Destroy()

moves.B2Strike3.Trail.Value = "LeftFoot"
moves.BTStrike4.Trail.Value = "RightFoot"

moves["龍GTigerDrop"].HSize.Value = 0

moves["HueDrop"].ForceSF.Value = 0

Instance.new("Folder", moves["龍Stomp"]).Name = "Hard"
Instance.new("Folder", moves["龍Stomp"]).Name = "RagdollHeat"

moves["BStrike1"].TurnAnim:Clone().Parent = moves["龍Strike1"]
moves["BStrike1"].THitboxLocations:Clone().Parent = moves["龍Strike1"]

moves.GAttack3.SF:Clone().Parent = moves["龍2Strike2"]

local SF = Instance.new("StringValue", moves.DerekCharge)
SF.Value = "0"
SF.Name = "SF"

moves["龍Attack4"].ComboAt:Clone().Parent = moves.GuruStumble
moves["龍Attack4"].Cancelable:Clone().Parent = moves.GuruStumble

moves["龍Attack4"].HitDur:Clone().Parent = moves.FStrike2

moves.BTStrike4.HitDur.Value = moves["龍Attack4"].HitDur.Value
moves.BTStrike4.HSize.Value = moves["龍TigerDrop"].HSize.Value

moves.BTStrike4.SF.Value = 0
moves.BTStrike4.MoveForward.Value = 12

local combo = Instance.new("StringValue", moves.B2Strike2)
combo.Value = moves.BStrike3.ComboAt.Value
combo.Name = "ComboAt"
moves["GAttack2"].SF.Value = moves.GAttack2.MoveDuration.Value

moves["龍Strike5"].ComboAt:Clone().Parent = moves["龍2Strike3"]

moves["H_FastFootworkBack"].Closest.Value = "40"
local wn = Instance.new("StringValue", moves["H_FastFootworkBack"])
wn.Name = "Within"
wn.Value = "15"

Instance.new("Folder", moves.TigerDrop).Name = "WhenBlocked"

status.Style.Changed:Connect(
	function()
	if status.Style.Value == "Brawler" then
		if brawler.VisualName.Value == "Dragon" then
			moves["H_FastFootworkBack"].Closest.Value = "40"
			if not moves["H_FastFootworkBack"]:FindFirstChild("Within") then
				local wn = Instance.new("StringValue", moves["H_FastFootworkBack"])
				wn.Name = "Within"
				wn.Value = "15"
			end
		elseif brawler.VisualName.Value == "Ouryu" then
			if moves["H_FastFootworkBack"]:FindFirstChild("Within") then
				moves["H_FastFootworkBack"]:FindFirstChild("Within"):Destroy()
				moves["H_FastFootworkBack"].Closest.Value = "15"
			end
		end
	elseif status.Style.Value == "Rush" then
		if moves["H_FastFootworkBack"]:FindFirstChild("Within") then
			moves["H_FastFootworkBack"]:FindFirstChild("Within"):Destroy()
			moves["H_FastFootworkBack"].Closest.Value = "15"
		end
	end
end)

brawler.VisualName:GetPropertyChangedSignal("Value"):Connect(
	function()
	if status.Style.Value == "Brawler" then
		if brawler.VisualName.Value == "Dragon" then
			moves["H_FastFootworkBack"].Closest.Value = "40"
			if not moves["H_FastFootworkBack"]:FindFirstChild("Within") then
				local wn = Instance.new("StringValue", moves["H_FastFootworkBack"])
				wn.Name = "Within"
				wn.Value = "15"
			end
		elseif brawler.VisualName.Value == "Ouryu" then
			if moves["H_FastFootworkBack"]:FindFirstChild("Within") then
				moves["H_FastFootworkBack"]:FindFirstChild("Within"):Destroy()
				moves["H_FastFootworkBack"].Closest.Value = "15"
			end
		end
	end
end)

--shucky easter egg idk
if not game.Workspace.Bots.AI:FindFirstChild("Shucky") then
	moves.ShuckyDrop.Anim.AnimationId = moves.GuruKnockback.Anim.AnimationId
	moves.ShuckyDrop.AniSpeed.Value = 1.35
	moves.ShuckyDrop.MoveForward.Value = "0"
	moves.ShuckyDrop.MoveStart.Value = "0"
	moves.ShuckyDrop.SF.Value = "0.05"
	local HSize = Instance.new("StringValue", moves.ShuckyDrop)
	HSize.Name = "HSize"
	HSize.Value = moves["DerekSlam"].HSize.Value
	moves.ShuckyDrop.Sound.Value = "Slap"
else
	sendNotification("(Mortal Reversal is unusable against this opponent. Your Iron Fist Counter should do.)")
	sendNotification("You are overcome by a sudden weakness. Perhaps you've forgotten something?")
end

-- heat aura
local function change_color()
	local style = status.Style.Value
	local heatValue = status.Heat.Value

	local Styles = {
		Brawler = brawler.Color.Value,
		Rush = rush.Color.Value,
		Beast = beast.Color.Value
	}

	local selectedColor = Styles[style]
	if not selectedColor then
		return
	end

	local DragonColor = selectedColor

	local DragonSequence = ColorSequence.new(
		{
		ColorSequenceKeypoint.new(0, DragonColor),
		ColorSequenceKeypoint.new(1, DragonColor)
	})

	local fillColor = DragonSequence.Keypoints[1].Value

	local fills = {
		Main.XP.Fill,
		Main.Heat.Fill,
		Main.Heat.ClimaxFill,
		Main.Heat.Fill2,
		Main.Heat.ClimaxFill2
	}
	for _, fill in ipairs(fills) do
		fill.ImageColor3 = fillColor
	end

	local rootPart = char.HumanoidRootPart

	local mainRate = (heatValue >= 100 and 115) or (heatValue >= 75 and 85) or 80
	local secondaryRate = (heatValue >= 100 and 90) or (heatValue >= 75 and 80) or 70
	local linesRate = (heatValue >= 100 and 60) or (heatValue >= 75 and 40) or 20

	rootPart.Fire_Main.Color = DragonSequence
	rootPart.Fire_Secondary.Color = DragonSequence
	rootPart.Fire_Main.Rate = mainRate
	rootPart.Fire_Secondary.Rate = secondaryRate
	rootPart.Lines1.Color = DragonSequence
	rootPart.Lines1.Rate = linesRate
	rootPart.Lines2.Color = DragonSequence
	rootPart.Lines2.Rate = linesRate
	rootPart.Sparks.Color = DragonSequence
	
	if truerds.Value then
		rootPart.TimeFor.Color = ColorSequence.new(
			{
			ColorSequenceKeypoint.new(0, dsp.Color.Value),
			ColorSequenceKeypoint.new(1, dsp.Color.Value)
		})
		
		interf.Azure.ImageColor3 = dsp.Color.Value
		
	elseif inExHeat.Value then
		rootPart.TimeFor.Color = ColorSequence.new(
			{
			ColorSequenceKeypoint.new(0, ouryu.Color.Value),
			ColorSequenceKeypoint.new(1, ouryu.Color.Value)
		})
		
		interf.Azure.ImageColor3 = ouryu.Color.Value
		
	end

	for _, part in ipairs(char:GetChildren()) do
		if part:IsA("MeshPart") then
			for _, trail in ipairs(part:GetChildren()) do
				if trail:IsA("MeshPart") then
					trail.Color = DragonSequence
				end
			end
		end
	end

	local auraBurst = char.UpperTorso["r2f_aura_burst"]
	local maxHeatEffect = showMaxHeatEffect()

	auraBurst.Lines1.Color = DragonSequence
	auraBurst.Lines2.Color = DragonSequence
	auraBurst.Flare.Color = DragonSequence
	auraBurst.Lines1.Enabled = maxHeatEffect
	auraBurst.Flare.Enabled = maxHeatEffect
	auraBurst.Smoke.Color = DragonSequence

	char.UpperTorso.Evading.Color = DragonSequence
end

--hact name changes
local heatMoveTextLabel = Main.HeatMove.TextLabel

local hactNames = {
	["Essence of Solid Counter"] = "Essence of Reversal",
	["Essence of Torment"] = "Essence of the Beast: Torment",
	["Essence of Brute"] = "Essence of the Beast: Overrun",
	["Essence of Knockout [Back]"] = "Essence of Knock Down",
	["Essence of Knockout [Front]"] = "Essence of Extreme Beast",
	["Guru Firearm Flip"] = "Komaki Shot Stopper",
	["Essence of Fisticuffs"] = "Essence of Brawling",
	["Essence of Chokehold"] = "Essence of Mad Dog: Chokehold",
}

-- custom heat actions
char.ChildRemoved:Connect(
	function(c)
	if c.Name == "Heated" then
		yinglong.Transparency = 1
	end
end)

char.ChildAdded:Connect(function(c)
	if c.Name == "Heated" then
		local movename = c:WaitForChild("MoveName", 1/60)
		local heating = c:WaitForChild("Heating", 1/60)
		
		if movename then
			if heating then
				if hactNames[movename.Value] then
					task.delay(1/60, function()
						Main.HeatMove.TextLabel.Text = hactNames[movename.Value]
					end)
				elseif movename.Value == "Essence of Frenzy" and not char:FindFirstChild("BeingHeated") then
					Main.HeatMove.TextLabel.Text = "Essence of Extreme Rush"
					playAnim(humanoid, moves["H_Tonfa"].Anim.AnimationId, "Action4", 1)
					playAnim(heating.Value.Humanoid, moves["H_Tonfa"].Victim1.AnimationId, "Action4", 1)
					local slapTimes = {
						0,
						.7,
						1,
						1.3,
						1.6,
						1.9
					}
					for _, t in ipairs(slapTimes) do
						task.delay(t, function()
							PlaySound("Slap")
						end)
					end
			
					task.delay(1.9, function()
						PlaySound("MassiveSlap")
					end)
				elseif movename.Value == "Essence of Fast Footwork [Back]" and not char:FindFirstChild("BeingHeated") then
					if status.Style.Value == "Brawler" and not isOuryu() then
						playAnim(humanoid, moves["H_SumoSlap"].Anim.AnimationId, "Action4", 1)
						playAnim(heating.Value.Humanoid, moves["H_SumoSlap"].Victim1.AnimationId, "Action4", 1)
						local slapTimes = {
							0.1,
							0.55,
							1.0,
							1.9
						}
						
						PlaySoundId(rep.Sounds.Teleport.Value, HumanoidRootPart)
						
						for _, t in ipairs(slapTimes) do
							task.delay(t, function()
								PlaySound("Slap")
							end)
						end
			
						task.delay(2, function()
							PlaySound("MassiveSlap")
						end)
						
						task.delay(1/60, function()
							Main.HeatMove.TextLabel.Text = "Essence of Sumo Slapping"
						end)
					end
				elseif movename.Value == "Ultimate Essence" then
					playAnim(humanoid, moves["H_UltimateEssence"].Anim.AnimationId, "Action4", 1)
					task.delay(1, function()
						PlaySound("MassiveSlap")
					end)
					playAnim(heating.Value.Humanoid, moves["H_UltimateEssence"].Victim1.AnimationId, "Action4", 1)
				elseif movename.Value == "Essence of Fast Footwork [Left]" and not char:FindFirstChild("BeingHeated") then
					task.delay(.5, function()
						playAnim(humanoid, moves["H_TSpinCounterRight"].Anim.AnimationId, "Action4", 1)
					end)
				elseif movename.Value == "Essence of Rolling" and not char:FindFirstChild("BeingHeated") then
					task.delay(.5, function()
						playAnim(humanoid, moves["H_Whirl"].Anim.AnimationId, "Action4", 1)
					end)
				elseif movename.Value == "Essence of Crushing" and not char:FindFirstChild("BeingHeated") then
					if isOuryu() then
						task.delay(1/60, function()
							Main.HeatMove.TextLabel.Text = "Essence of Fast Footwork [Right]"
						end)
						task.delay(.5, function()
							playAnim(humanoid, moves["H_FallenProne"].Anim.AnimationId, "Action4", 1)
						end)
					else
						playAnim(humanoid, moves.H_TSpinCounterBack.Anim.AnimationId, "Action4", 1)
					end
				elseif isOuryu() and movename.Value == "Komaki Fist Reversal [Right]" and not char:FindFirstChild("BeingHeated") then
					task.delay(1/60, function()
						Main.HeatMove.TextLabel.Text = "Essence of Fast Footwork [Front]"
					end)
				elseif status.Style.Value == "Brawler" and movename.Value == "Essence of Head Press: Prone" and not char:FindFirstChild("BeingHeated") then
					task.delay(1/60, function()
						Main.HeatMove.TextLabel.Text = "Essence of Might"
					end)
				elseif movename.Value == "Essence of Whirl" and not char:FindFirstChild("BeingHeated") then
					task.delay(1/60, function()
						Main.HeatMove.TextLabel.Text = "Essence of Mad Dog: Whirl"
					end)
					playAnim(humanoid, "rbxassetid://11409668605", "Action4", 1)
					playAnim(heating.Value.Humanoid, "rbxassetid://11409670145", "Action4", 1)
				elseif isOuryu() and movename.Value == "Essence of Terror" and not char:FindFirstChild("BeingHeated") then
					task.delay(1/60, function()
						Main.HeatMove.TextLabel.Text = "Essence of Hundred Fist Rush"
					end)
				elseif movename.Value == "Essence of Beatdown" and not char:FindFirstChild("BeingHeated") then
					for _, p in ipairs(char:GetChildren()) do
						if string.find(p.Name, "wep_") or string.find(p.Name, "prop_") then
							task.delay(1/60, function()
								Main.HeatMove.TextLabel.Text = "Essence of Weaponry"
							end)
						end
					end
				end
			elseif movename.Value == "Ultimate Essence" then					
				Main.HeatMove.TextLabel.Text = "Essence of Desperation"
				playAnim(humanoid, moves["H_Whirl"].Anim.AnimationId, "Action4", .7, .9)
			end
		end
	end
end)

-- style switching stuff
Main.GUY.GUY.Size = UDim2.new(1, 0, 1, 0)
interf.Battle.ImageTransparency = 1

local function styleswitch()
	local guyImage = Main.GUY.GUY

	-- Common settings
	guyImage.ScaleType = Enum.ScaleType.Fit
	guyImage.ClipsDescendants = false

	if status.Style.Value == "Brawler" then
		if not isOuryu() then
			guyImage.Image = "rbxassetid://125271993399114"
			if truerds.Value then
				guyImage.Image = "rbxassetid://113894393942474"
			end
		else
			if bName == "Brawler" then
				guyImage.Image = "rbxassetid://77002058287348"
			else
				guyImage.Image = "rbxassetid://108063383518240"
			end
		end
	elseif status.Style.Value == "Rush" then
		guyImage.Image = "rbxassetid://104601719368210"
	elseif status.Style.Value == "Beast" then
		guyImage.Image = "rbxassetid://117731163415083"
	end
end

styleswitch()
status.Style:GetPropertyChangedSignal("Value"):Connect(styleswitch)
truerds:GetPropertyChangedSignal("Value"):Connect(styleswitch)
brawler.VisualName:GetPropertyChangedSignal("Value"):Connect(styleswitch)

status.Style:GetPropertyChangedSignal("Value"):Connect(
	function()
	if not char:FindFirstChild("Holding") and isInBattle() then
		repeat
			task.wait()
		until not status.Attacking.Value and not status.Damaged.Value and not doingHact()
		if status.Style.Value == "Brawler" then
			if isOuryu() then
				playAnim(humanoid, moves["Taunt"].Anim.AnimationId, "Idle", 4)
			else
				playAnim(humanoid, rep.Anims.Rage.AnimationId, "Idle", 2)
			end
		elseif status.Style.Value == "Rush" then
			playAnim(humanoid, rep.Anims.WepEquip.AnimationId, "Idle")
		elseif status.Style.Value == "Beast" then
			playAnim(humanoid, moves["BeastTaunt"].Anim.AnimationId, "Idle", 4)
		end
	end
end)

brawler.VisualName:GetPropertyChangedSignal("Value"):Connect(function()
	if not char:FindFirstChild("Holding") and isInBattle() then
		repeat
			task.wait()
		until not status.Attacking.Value and not status.Damaged.Value and not doingHact()
		if isOuryu() then
			playAnim(humanoid, moves["Taunt"].Anim.AnimationId, "Idle", 4)
		else
			playAnim(humanoid, rep.Anims.Rage.AnimationId, "Idle", 2)
		end
	end
end)

-- ex-heat mode
for i = 1, 2 do
	for _, v in ipairs(moves["BAttack" .. i]:GetChildren()) do
		if v:IsA("NumberValue") then
			local bv = v:Clone()
			bv.Name = "base_" .. v.Name
			bv.Parent = v.Parent
		end
	end
end

inExHeat:GetPropertyChangedSignal("Value"):Connect(function()
	if inExHeat.Value then
		for i = 1, 2 do
			for _, v in ipairs(moves["BAttack" .. i]:GetChildren()) do
				local anisp = v.Parent:FindFirstChild("AniSpeed")
				local banisp = v.Parent:FindFirstChild("base_AniSpeed")
				local bv = v.Parent:FindFirstChild("base_" .. v.Name)
				
				anisp.Value = banisp.Value * 2
				if bv and v.Name ~= "AniSpeed" and v.Name ~= "HSize" then
					v.Value = bv.Value * (banisp.Value / anisp.Value)
				end
			end
		end
	else
		for i = 1, 2 do
			for _, v in ipairs(moves["BAttack" .. i]:GetChildren()) do
				local bv = v.Parent:FindFirstChild("base_" .. v.Name)
				
				if bv then
					v.Value = bv.Value
				end
			end
		end
	end
end)

local billboardGui = Instance.new("BillboardGui", char.UpperTorso)
billboardGui.Name = "rdsfx"
billboardGui.Size = UDim2.new(4, 0, 4, 0) -- Size of the dwagon
billboardGui.StudsOffset = Vector3.new(0, 0, 0) -- Offset above the character's head
billboardGui.Adornee = char:WaitForChild("UpperTorso")
billboardGui.AlwaysOnTop = true

billboardGui.Enabled = false

local rdsfx = Instance.new("ImageLabel", billboardGui)
rdsfx.Image = "rbxassetid://103940238924878"
rdsfx.ImageTransparency = 0
rdsfx.BackgroundTransparency = 1
rdsfx.BorderSizePixel = 0
rdsfx.Size = UDim2.new(1,0,1,0)

local function play_rdsfx()
	rdsfx.ImageTransparency = 0
	billboardGui.Size = UDim2.new(4, 0, 4, 0)
	billboardGui.Enabled = true
	local rdsgoal = {
		ImageTransparency = 1
	}
	
	local bbgoal = {
		Size = UDim2.new(6.5, 0, 6.5, 0)
	}
	
	local twinfo = TweenInfo.new(1.5, Enum.EasingStyle.Circular, Enum.EasingDirection.Out)
	
	local rdstween = game:GetService("TweenService"):Create(rdsfx, twinfo, rdsgoal)
	rdstween:Play()
	
	local bbtween = game:GetService("TweenService"):Create(billboardGui, twinfo, bbgoal)
	bbtween:Play()
	
	task.delay(1.5, function()
		billboardGui.Enabled = false
	end)
end

local function rdscheck()
	if truerds.Value or inExHeat.Value then
		play_rdsfx()
	end
end

truerds:GetPropertyChangedSignal("Value"):Connect(function()
	rdscheck()
end)

inExHeat:GetPropertyChangedSignal("Value"):Connect(function()
	rdscheck()
end)

rds:GetPropertyChangedSignal("Value"):Connect(function()
	if rds.Value then
		local anim
		local speed
		if status.Style.Value == "Brawler" and isOuryu() then
			anim = moves.H_FallenProne.Anim.AnimationId
			speed = 1.25
		else
			anim = rep.Anims.Rage.AnimationId
			speed = 2
		end
		char.HumanoidRootPart.Anchored = true
		if not IsInPvp() then
			rep.IsELO.Value = true
		end
		playAnim(humanoid, anim, "Action4", speed, .75)
		task.wait(.75)
		if not IsInPvp() then
			rep.IsELO.Value = false
		end
		char.HumanoidRootPart.Anchored = false
	end
end)

rds:GetPropertyChangedSignal("Value"):Connect(function()
	if not rds.Value then
		if isOuryu() then
			replaceStyle("Brawler", "Ouryu")
		else
			replaceStyle("Brawler", "Dragon")
		end
		
		if status:FindFirstChild("Invulnerable") then
			status.Invulnerable:Destroy()
		end
	end
end)

inExHeat:GetPropertyChangedSignal("Value"):Connect(function()
	if inExHeat.Value then
		replaceStyle("Brawler", "ExHeat")
	end
end)

truerds:GetPropertyChangedSignal("Value"):Connect(function()
	if truerds.Value then
		Instance.new("Folder", status).Name = "Invulnerable"
		replaceStyle("Brawler", "Spirit")
	end
end)

-- extra attacks
status.AttackBegan.Changed:Connect(function()
	if status.AttackBegan.Value then
		if status.CurrentMove.Value.Name == "龍2Strike3" and isOuryu() then
			brawler.Strike1.Value = "B2Strike3"
			task.delay(.8, function()
				brawler.Strike1.Value = "龍Strike1"
			end)
		elseif status.CurrentMove.Value.Name == "龍GTigerDrop" then
			if char.LockedOn.Value and (char.HumanoidRootPart.CFrame.Position - char.LockedOn.Value.CFrame.Position).Magnitude <= 6 then
				local lock = char.LockedOn.Value
				noanger()
				fillHeat(6)
				
				UseHeatAction("H_Terror", "Brawler", {
					lock,
					lock,
					lock,
					lock
				})
				
				depleteHeat(100)
			end
		elseif status.CurrentMove.Value.Name == "Grab" and status.Style.Value == "Brawler" and not isOuryu() then
			if char.LockedOn.Value and (char.HumanoidRootPart.CFrame.Position - char.LockedOn.Value.CFrame.Position).Magnitude <= 6 then
				local lock = char.LockedOn.Value
				if lock.Parent:FindFirstChild("Ragdolled") then
					UseHeatAction("T_ShoulderGrab", "Brawler", {
						lock
					})
				end
			end
		elseif status.CurrentMove.Value.Name == "B2Strike1" and isOuryu() then
			brawler.Strike1.Value = "B2Strike3"
			task.delay(.8, function()
				brawler.Strike1.Value = "龍Strike1"
			end)
		elseif status.CurrentMove.Value.Name == "BStrike4" and isOuryu() then
			brawler.Strike1.Value = "龍Strike5"
			task.delay(.8, function()
				brawler.Strike1.Value = "龍Strike1"
			end)
		elseif status.CurrentMove.Value.Name == "MStrike2" then
			brawler.Strike1.Value = "B2Strike2"
			task.delay(.5, function()
				brawler.Strike1.Value = "龍Strike1"
			end)
		elseif status.CurrentMove.Value.Name == "FStrike2" then
			task.wait(.4)
			brawler.Strike1.Value = "BTStrike4"
			task.delay(.6, function()
				brawler.Strike1.Value = "龍Strike1"
			end)
		end
	end
end)

plr.ChildRemoved:Connect(function(c)
	if c.Name == "InBattle" then
		if status:FindFirstChild("Invulnerable") then
			status.Invulnerable:Destroy()
		end
	end
end)

local dashcooldown = false

--ex-heat teleport
local function performDash(lock, root)
	if dashcooldown then return end
	
	-- anim
	playAnim(humanoid, brawler.EvadeF.AnimationId, "Action4", 2)
	
	-- trail + tp
	local endpos = lock.Position + (lock.CFrame.LookVector * Vector3.new(1, 0, 1).Unit * 3)
	
	createTrail(root.Position, endpos, dragon.Color.Value)
	task.wait(.1)
	dashcooldown = true
	root.CFrame = CFrame.new(lock.Position + (lock.CFrame.LookVector * Vector3.new(1, 0, 1).Unit * 3), lock.Position)
	deflect(lock.Parent, moves.HueDrop)

	-- Play sounds
	for i = 1, 4 do
		PlaySoundId(rep.Sounds.Teleport.Value, HumanoidRootPart)
	end
	
	task.delay(.5, function()
		dashcooldown = false
	end)
end

local function onConditionMet()
	local root = game.Players.LocalPlayer.Character.PrimaryPart
	local lock = game.Players.LocalPlayer.Character.LockedOn.Value
	if truerds.Value and lock and lock:IsDescendantOf(workspace) and lock.Parent:FindFirstChild("Health") and lock.Parent.Health.Value > 0 and char.HumanoidRootPart.TimeFor.Color.Keypoints[1].Value ~= rush.Color.Value and char.HumanoidRootPart.TimeFor.Color.Keypoints[1].Value ~= beast.Color.Value and not char.HumanoidRootPart.Anchored then
		performDash(lock, root)
	end

	if truerds.Value and lock and lock:IsDescendantOf(workspace) and game.Players:FindFirstChild(lock.Parent.Name) and char.HumanoidRootPart.TimeFor.Color.Keypoints[1].Value ~= rush.Color.Value and char.HumanoidRootPart.TimeFor.Color.Keypoints[1].Value ~= beast.Color.Value and not char.HumanoidRootPart.Anchored then
		if game.Players[lock.Parent.Name].Status.Health.Value > 0 then
			performDash(lock, root)
		end
	end
end

-- Connect the Evading signal
plr.Status.FFC.Evading:GetPropertyChangedSignal("Value"):Connect(
	function()
	if plr.Status.FFC.Evading.Value then
		onConditionMet()
	end
end)

-- Connect the Attacking signal
status.Attacking.Changed:Connect(
	function()
	if status.Attacking.Value then
		local root = game.Players.LocalPlayer.Character.PrimaryPart
		local lock = game.Players.LocalPlayer.Character.LockedOn.Value
		if (not string.match(status.CurrentMove.Value.Name, "Taunt")) and lock and (lock.Position - root.Position).Magnitude >= 1.5 then
			onConditionMet()
		end
	end
end)

-- taunt heat
status.Taunting.Changed:Connect(
	function()
	local lock = char.LockedOn.Value
	if status.Taunting.Value and lock then
		fillHeat(1)
	end
end)

-- Dragon Spirit
local BotsAI = workspace.Bots.AI

-- Optimized deflect function
local function debounce()
	if not truerds.Value then
		return
	end
	if not IsInPvp() then
		for _, bot in ipairs(BotsAI:GetChildren()) do
			local target = bot:FindFirstChild("LastTarget")
			local attacking = bot:FindFirstChild("AttackBegan")
			local tookAim = bot:FindFirstChild("TookAim")
			local blocking = bot:FindFirstChild("Blocking")
			local humanoidRootPart = bot:FindFirstChild("HumanoidRootPart")

            -- Check if essential parts exist
			if target and attacking and tookAim and blocking and humanoidRootPart then
				if target.Value == char.HumanoidRootPart then
					if attacking.Value or blocking.Value then
						deflect(bot, moves.Slapper)
					elseif tookAim.Value then
						deflect(bot, moves.Slapper)
						task.delay(.6, function()
							deflect(bot, moves.Slapper)
						end)
					end
				end
			end
		end
	else
		for _, bot in ipairs(game.Players:GetChildren()) do
			if bot ~= plr then
				local target = bot.Status:FindFirstChild("LastTarget")
				local attacking = bot.Status:FindFirstChild("AttackBegan")
				local blocking = bot.Status:FindFirstChild("Blocking")
				local humanoidRootPart = bot.Character.HumanoidRootPart

                -- Check if essential parts exist
				if attacking and blocking and humanoidRootPart then
					if attacking.Value or blocking.Value then
						deflect(bot, moves.Slapper)
					end
				end
			end
		end
	end
end


char.ChildAdded:Connect(function(c)
	if c.Name == 'Grabbing' and angry() then
		UseHeatAction("T_BeastToss", "Brawler", {
			c.Value.HumanoidRootPart
		})
	end
end)

char.ChildAdded:Connect(function(c)
	if c.Name == 'Grabbed' then
		noanger()
		fillHeat(6)
		UseHeatAction("H_Escape", "Brawler", {
			c:WaitForChild("Part0", .5).Value
		})
		UseHeatAction("H_Escape", "Brawler", {
			c:WaitForChild("Part1", .5).Value
		})
	end
end)

--abilities section
local menu = pgui.MenuUI.Menu
local abil = menu.Abilities.Frame.Frame.Frame
local abilFolder = game.ReplicatedStorage.Abilities

abilFolder.Brawler["Ultimate Essence"].Prompt.Value = "HEAVY ATTACK near stunned enemies while in Red Heat Mode or Feel the Heat"

local abilNames = {
	["Ultimate Essence"] = "Ultimate Essence / Essence of the Dragon God",
	["Essence of Frenzy"] = "Essence of Extreme Rush",
	["Counter Hook"] = "Komaki Tiger Drop / Mortal Reversal",
	["Guru Knockback"] = "Komaki Knock Back / Body Counter",
	["Guru Parry"] = "Komaki Parry / Twist Counter",
	["Essence of Brute"] = "Essence of the Beast: Overrun",
	["Guru Spin Counter"] = "Komaki Fist Reversal",
	["Essence of Fisticuffs"] = "Essence of Might / Essence of Brawling",
	["Guru Firearm Flip"] = "Komaki Shot Stopper",
	["Guru Dodge Shot"] = "Komaki Evade & Strike",
	["Guru Safety Roll"] = "Komaki Dharma Tumbler",
	["Time for Resolve"] = "Dragon's Rage / Extreme Heat Mode",
	["Cat-like Reflexes"] = "Komaki Cat-like Reflexes",
}

local abilDescs = {
	["Ultimate Essence"] = "The ultimate attack of the Dragon of Dojima. Unleash enough might to crush any opponent.",
	["Time for Resolve"] = "While Dragon's Rage is in effect, your attacks become more powerful, and you won't be staggered by enemy attacks. You can also press HEAVY ATTACK or EVADE to rapidly close the distance to enemies, or rapidly press LIGHT ATTACK in " .. bName .. " Style to unleash a flurry of punches in Extreme Heat Mode.",
	["Guru Parry"] = "One of many skills in the Komaki style. Parry the enemy's attack and then land a blow to the stomach, or reuse the Twist Counter you haven't used since the Bubble to knock them off-balance in " .. bName .. " Style.",
	["Counter Hook"] = "One of many skills in the Komaki style. The style's strongest counter-attack. The lower your Heat, the more damage it does.",
	["Guru Knockback"] = "One of many skills in the Komaki style. Repel an enemy's attack while guarding, then unleash a crushing attack of your own.",
	["Resolute Counter"] = "Dragon of Dojima Style only. You can strike back at enemies attacking you unless you are sent back flying."
}

abil.Tabs.Tabs.Brawler.Filled.Title.Text = 'Dragon / ' .. bName
abil.Tabs.Tabs.Rush.Filled.Title.Text = "Rush"
abil.Tabs.Tabs.Beast.Filled.Title.Text = "Beast"

local function updateAbil()
	if abilFolder then
		local styleList = {
			"Brawler",
			"Rush",
			"Beast"
		}
		
		for _, v in ipairs(styleList) do
			for _, move in ipairs(abilFolder[v]:GetChildren()) do
				if abilDescs[move.Name] then
					move.Description.Value = abilDescs[move.Name]
				end
				
				if abilNames[move.Name] then
					abil.List.ListFrame[move.Name].Generic.Label.Text = abilNames[move.Name]
				end
			end
		end
	end
	
	local DragonColor = brawler.Color.Value
	for i, v in ipairs(abil.List.ListFrame:GetChildren()) do
		if v:IsA("ImageButton") then
			if v:FindFirstChild("sty").Value == "Brawler" and v:FindFirstChild("MyColor").Value == Color3.fromRGB(19, 157, 255) then
				v.MyColor.Value = DragonColor
				v.Generic.Label.TextColor3 = DragonColor
			end
		end
	end
end

abil.List.ListFrame.ChildAdded:Connect(updateAbil)

-- ps2 ui
local EnemyHP = pgui.EInterface.EnemyHP

Main.Health.Label.Visible = false
Main.MainLeft.Image = "rbxassetid://17175297588"
Main.StyleBar.amount.Transparency = 1

pgui.MobileUI.MobileFrame.Left.Buttons.DPad.DPadDown.Visible = false

local style1 = pgui.MobileUI.MobileFrame.Left.Buttons.DPad.DPadUp
style1.Position = UDim2.new(0.5, 0, 0, 0)
style1.Size = UDim2.new((0.3333333333333333), 0, 1, 0)
style1.TextLabel.Size = UDim2.new(.8, 0, (0.3333333333333333), 0)
style1.TextLabel.Position = UDim2.new(.5, 0, .2, 0)
style1.TextLabel.Text = bName
style1.TextLabel.TextStrokeColor3 = ouryu.Color.Value

pgui.MobileUI.MobileFrame.Left.Buttons.DPad.DPadLeft.TextLabel.Text = "Rush"
pgui.MobileUI.MobileFrame.Left.Buttons.DPad.DPadLeft.TextLabel.TextStrokeColor3 = rush.Color.Value
pgui.MobileUI.MobileFrame.Left.Buttons.DPad.DPadRight.TextLabel.Text = "Beast"
pgui.MobileUI.MobileFrame.Left.Buttons.DPad.DPadRight.TextLabel.TextStrokeColor3 = beast.Color.Value

local style4 = style1.TextLabel:Clone()
style4.Name = "TextLabel"
style4.Parent = style1
style4.Position = UDim2.new(.5, 0, .8, 0)
style4.Text = "Dragon"
style4.TextStrokeColor3 = dragon.Color.Value

-- Reference to the ImageButton
local imageButton = style1

-- Function to handle touch input on the ImageButton
local function onTouch(input)
	if input.UserInputType == Enum.UserInputType.Touch then
        -- Get the absolute position of the touch
		local touchPosition = input.Position

        -- Get the position and size of the ImageButton
		local buttonPosition = imageButton.AbsolutePosition
		local buttonSize = imageButton.AbsoluteSize

        -- Calculate the relative position of the touch within the ImageButton
		local relativeY = touchPosition.Y - buttonPosition.Y
		repeat
			task.wait()
		until not status.Attacking.Value and not status.Damaged.Value and not doingHact()
		if relativeY <= 50 then
			if inExHeat.Value then
				replaceStyle("Brawler", "ExHeat")
			else
				replaceStyle("Brawler", "Ouryu")
			end
		else
			if truerds.Value then
				replaceStyle("Brawler", "Spirit")
			else
				replaceStyle("Brawler", "Dragon")
			end
		end
	end
end

imageButton.Activated:Connect(onTouch)

local colors = {
	Color3.fromRGB(172, 172, 61),
	Color3.fromRGB(60, 65, 204),
	Color3.fromRGB(0, 255, 0),
	Color3.fromRGB(241, 131, 241),
	Color3.fromRGB(0, 255, 0),
	Color3.fromRGB(179, 74, 240),
	Color3.fromRGB(0, 255, 0)
}

for i = 1, # colors do
	EnemyHP.BG.Meter["Fill" .. i].BackgroundColor3 = colors[i]
end

local function updateHud()
	for _, bot in ipairs(game.Workspace.Bots.AI:GetChildren()) do
		bot.HumanoidRootPart.Level.TextLabel.Visible = false
		if bot:WaitForChild("HumanoidRootPart"):FindFirstChild("AI") then
			for _, part in ipairs(bot.HumanoidRootPart.AI:GetChildren()) do
				if part.Name ~= "HeatAction" then
					part.Visible = false
					
					part:GetPropertyChangedSignal("Visible"):Connect(function()
						part.Visible = false
					end)
				end
			end
		end
	end
end

updateHud()
game.Workspace.Bots.AI.ChildAdded:Connect(updateHud)

for _, v in ipairs(pgui.MenuUI.Menu.PlayerMenu.Buttons:GetChildren()) do
	v.Label.Font = Enum.Font.Bodoni
	v.Label.RichText = true
	v.Label.Text = "<b><i>" .. v.Label.Text .. "</i></b>"
end

--heat bar
local fill3 = Main.Heat.Fill2:Clone()
fill3.Parent = Main.Heat
fill3.Name = "Fill3"
fill3.Visible = false
fill3.ImageColor3 = Color3.fromRGB(255, 255, 255)
fill3.ImageTransparency = 1
Main.Heat.Fill2.Changed:Connect(
	function()
	fill3.Size = Main.Heat.Fill2.Size
end)
local tween = game:GetService("TweenService"):Create(
	fill3, TweenInfo.new(0.3, Enum.EasingStyle.Linear, Enum.EasingDirection.Out, math.huge, true, 0), {
	ImageTransparency = 0.4
})
tween:Play()
local function updateFill()
	fill3.Visible = status.Heat.Value >= 50 and true or false
end

local cfill = Main.Heat.ClimaxFill2:Clone()
cfill.Parent = Main.Heat
cfill.Name = "ClimaxFill3"
cfill.Visible = false
cfill.ImageColor3 = Color3.fromRGB(255, 255, 255)
cfill.ImageTransparency = 1
Main.Heat.ClimaxFill.Changed:Connect(
	function()
	cfill.Size = Main.Heat.ClimaxFill2.Size
end)
local tween = game:GetService("TweenService"):Create(
	cfill, TweenInfo.new(0.3, Enum.EasingStyle.Linear, Enum.EasingDirection.Out, math.huge, true, 0), {
	ImageTransparency = 0.45
})
tween:Play()
local function updateFill()
	fill3.Visible = status.Heat.Value >= 50 and true or false
	cfill.Visible = status.Heat.Value >= 75 and true or false
end
status.Heat.Changed:Connect(
	function()
	updateFill()
end)
updateFill()

-- Update text label position
EnemyHP.TextLabel.Position = UDim2.new(- 1, - 5, 0, 18)

--kiryu easter egg
EnemyHP.TextLabel:GetPropertyChangedSignal("Text"):Connect(
	function()
	if EnemyHP.TextLabel.Text == "Legendary Dragon" then
		EnemyHP.TextLabel.Text = "Kazuma Kiryu"
	end
end)

interf.BattleStart:GetPropertyChangedSignal("Text"):Connect(
	function()
	if interf.BattleStart.Text == "LEGENDARY DRAGON" then
		if _G.dodconfig.morph then
			interf.BattleStart.Text = "KAZUMA KIRYU"
		else
			interf.BattleStart.Text = "堂島の龍"
		end
	end
end)

status.Health.Changed:Connect(
	function()
	if status.Health.Value <= 0 then
		task.wait()
		if not plr.Character:FindFirstChild("ImaDea") then
			return
		end
		local arena = status.MyArena.Value
		if arena then
			if arena:FindFirstChild("AI"):FindFirstChild("Object") and arena.AI.Object.Value and arena.AI.Object.Value.Name == "Legendary Dragon" and _G.dodconfig.morph then
				sendNotification('I wish for you to be at peace."')
				sendNotification('"Whatever happens to me...')
			end
		end
	end
end)

interf.BattleStart.Font = Enum.Font.PermanentMarker
interf.BattleStart.lvl.Visible = false
interf.BattleStart.Position = UDim2.new(0.5, 0, 0.5, 0)

pgui.EInterface.EnemyHP.BG.Meter.HPTxt.Visible = false
pgui.EInterface.EnemyHP.BG.Meter.Rotation = 180

interf.EndGood.Value = getsynasset("dragonstyle/end.wav")

local watermark = 'Yakuza Styles by whatisaman (@miserablesecretpile on Discord). If you bought this script, you were scammed.\nI only go by whatisaman, whatisaman-r2f and miserablesecretpile. Other names are skids.'
menu.Bars.Mobile_Title.Text = watermark
menu.Bars.Mobile_Title.Visible = true
menu.Bars.Mobile_Title.ZIndex = 9999
menu.Bars.Mobile_Title.TextColor3 = Color3.new(1, 1, 1)

local function jumpscare()
	local sgui = Instance.new("ScreenGui", pgui)
	sgui.IgnoreGuiInset = true
	sgui.DisplayOrder = 999999999999
	
	local meiwing = Instance.new("ImageLabel", sgui)
	meiwing.Image = "rbxassetid://88237662909158"
	meiwing.Size = UDim2.new(1, 0, 1, 0)
	meiwing.Position = UDim2.new(0, 0, 0, 0)
end

local properties = {
	"Transparency",
	"TextTransparency",
	"Size",
	"Text",
	"Visible",
	"ZIndex",
	"TextColor3",
	"TextSize",
}

local function checkshit()
	for _, v in ipairs(properties) do
		menu.Bars.Mobile_Title:GetPropertyChangedSignal(v):Connect(function()
			jumpscare()
			print(v)
			task.wait(1.75)
			while true do end
		end)
	end
end

checkshit()

--reload char
--updateSpeed()
local ff = Instance.new("Folder", status)
ff.Name = "Invulnerable"

moves["龍TigerDrop"].Anim.AnimationId = "rbxassetid://12120052426"
moves["龍GTigerDrop"].Anim.AnimationId = moves.BAttack1.Anim.AnimationId
respawn()
moves["龍TigerDrop"].Anim.AnimationId = "rbxassetid://11464955887"

game:GetService("RunService").RenderStepped:Connect(
	function()
	debounce()
	change_color()
end)

fillHeat(6)

local alrRun = Instance.new("Folder", rep)
alrRun.Name = "Dragon"

replaceStyle("Brawler", "Dragon")

--morph setup
local characterToChange = "Your Avatar"
local characterToChangeTo = "Kiryu Morph"

if _G.dodconfig.morph and _G.dodconfig.custommorph ~= "r6" then
	if not _G.dodconfig.custommorph then
		_G.Morph = _G.dodconfig.useMorph
	else
		_G.Morph = "Legendary Dragon"
	end
	
	char.HumanoidRootPart.Anchored = true
	loadstring(game:HttpGet("https://raw.githubusercontent.com/aAAAakakrvmv192/R2FMods/main/charmorphmod.lua"))()
end

char.HumanoidRootPart.Anchored = true

local function morph()
	if _G.dodconfig.morph and _G.Morph == "Legendary Dragon" and char:FindFirstChild("Ignore") then
		if _G.dodconfig.custommorph == "Y5" or _G.dodconfig.custommorph == "Y1" then
			local kiryuHairMesh = char.Ignore.FakeHead.Kiryu_Hair.Mesh
			kiryuHairMesh.MeshId = "rbxassetid://14720023616"
			kiryuHairMesh.TextureId = "rbxassetid://14719999915"
			kiryuHairMesh.Offset = Vector3.new(0, - 0.25, 0.15)
		elseif _G.dodconfig.custommorph == "2hu" then
			local beret = char.Ignore.FakeHead.Kiryu_Hair
			beret.Mesh.MeshId = "rbxassetid://15612556635"
			beret.Mesh.TextureId = "rbxassetid://15612558735"
			beret.Mesh.Offset = Vector3.new(0, .5, 0)
			local hair1 = beret:Clone()
			hair1.Mesh.MeshId = "rbxassetid://13556307008"
			hair1.Mesh.TextureId = "http://www.roblox.com/asset/?id=13335165334"
			hair1.Parent = beret.Parent
			hair1.Mesh.Offset = Vector3.new(.05, -1, 0)
			local hair2 = beret:Clone()
			hair2.Mesh.MeshId = "rbxassetid://13813808731"
			hair2.Mesh.TextureId = "http://www.roblox.com/asset/?id=13335165334"
			hair2.Parent = beret.Parent
			hair2.Mesh.Offset = Vector3.new(.05, -1, 0)
			
			char.Ignore.FakeHead.face.Texture = "rbxassetid://108833103440334"
			
			hair2:FindFirstChildOfClass("Weld").C1 = hair2:FindFirstChildOfClass("Weld").C1 * CFrame.Angles(0, math.rad(180), 0)
		end
		
		if _G.dodconfig.custommorph == "Y5" then
			local darkGrey = BrickColor.new("Dark grey")
			local black = BrickColor.new("Black")
			local white = BrickColor.new("White")
		
			for _, part in ipairs(char:GetChildren()) do
				if part:IsA("MeshPart") then
					if string.match(part.Name, "Arm") or part.Name == "UpperTorso" then
						part.BrickColor = darkGrey
					elseif not string.match(part.Name, "Hand") and part.Name ~= "Head" then
						part.BrickColor = black
					end
				end
			end
		
			local colorUpdates = {
				{
					char.Ignore.FakeUpperTorso.Kiryu_Skin,
					white
				},
				{
					char.Ignore.FakeUpperTorso.Kiryu_Suit,
					darkGrey
				},
				{
					char.Ignore.FakeLowerTorso.Kiryu_Tail,
					darkGrey
				},
				{
					char.Ignore.FakeLeftLowerArm.Suit_CuffL,
					darkGrey
				},
				{
					char.Ignore.FakeRightLowerArm.Suit_CuffR,
					darkGrey
				},
				{
					char.Ignore.FakeLeftLowerArm.Suit_CuffSL,
					darkGrey
				},
				{
					char.Ignore.FakeRightLowerArm.Suit_CuffSR,
					darkGrey
				},
				{
					char.Ignore.FakeUpperTorso.Kiryu_Shirt,
					black
				},
				{
					char.Ignore.FakeLowerTorso.Kiryu_BeltLoop,
					black
				},
				{
					char.Ignore.FakeLeftLowerLeg.Suit_PantL,
					black
				},
				{
					char.Ignore.FakeRightLowerLeg.Suit_PantR,
					black
				},
			}
		
			for _, update in ipairs(colorUpdates) do
				update[1].BrickColor = update[2]
			end
		elseif _G.dodconfig.custommorph == "Y0" then
			local black = BrickColor.new("Black")
			local white = BrickColor.new("White")
		
			for _, part in ipairs(char:GetChildren()) do
				if part:IsA("MeshPart") then
					if not string.match(part.Name, "Hand") and part.Name ~= "Head" then
						part.BrickColor = black
					end
				end
			end
		
			local colorUpdates = {
				{
					char.Ignore.FakeUpperTorso.Kiryu_Suit,
					black
				},
				{
					char.Ignore.FakeLowerTorso.Kiryu_Tail,
					black
				},
				{
					char.Ignore.FakeLeftLowerArm.Suit_CuffL,
					black
				},
				{
					char.Ignore.FakeRightLowerArm.Suit_CuffR,
					black
				},
				{
					char.Ignore.FakeLeftLowerArm.Suit_CuffSL,
					white
				},
				{
					char.Ignore.FakeRightLowerArm.Suit_CuffSR,
					white
				},
				{
					char.Ignore.FakeUpperTorso.Kiryu_Shirt,
					white
				},
				{
					char.Ignore.FakeLowerTorso.Kiryu_BeltLoop,
					black
				},
				{
					char.Ignore.FakeLeftLowerLeg.Suit_PantL,
					black
				},
				{
					char.Ignore.FakeRightLowerLeg.Suit_PantR,
					black
				},
			}
		
			for _, update in ipairs(colorUpdates) do
				update[1].BrickColor = update[2]
			end
		elseif _G.dodconfig.custommorph == "2hu" then
			Instance.new("Pants", char).PantsTemplate = "http://www.roblox.com/asset/?id=9651684388"
			
			local remove = {
				char.Ignore.FakeUpperTorso.Kiryu_Suit,
				char.Ignore.FakeLowerTorso.Kiryu_Tail,
				char.Ignore.FakeLowerTorso.Kiryu_Belt,
				char.Ignore.FakeUpperTorso.Kiryu_Shirt,
				char.Ignore.FakeUpperTorso.Kiryu_Skin,
				char.Ignore.FakeUpperTorso.Kiryu_Buttons,
				char.Ignore.FakeLowerTorso.Kiryu_BeltLoop,
				char.Ignore.FakeRightLowerArm.Suit_CuffSR,
				char.Ignore.FakeLeftLowerArm.Suit_CuffSL,
			}
			
			for _, v in ipairs(remove) do
				v:Destroy()
			end
			
			char.Ignore.FakeRightLowerArm.Suit_CuffR:FindFirstChildOfClass("Weld").Part0 = char.Ignore.FakeRightUpperArm
			char.Ignore.FakeLeftLowerArm.Suit_CuffL:FindFirstChildOfClass("Weld").Part0 = char.Ignore.FakeLeftUpperArm
			char.Ignore.FakeRightLowerArm.Suit_CuffR:FindFirstChildOfClass("Weld").C0 = CFrame.new(0.012, -.511, -.002)
			char.Ignore.FakeLeftLowerArm.Suit_CuffL:FindFirstChildOfClass("Weld").C0 = CFrame.new(0.001, -.511, -.002)
			char.Ignore.FakeLeftLowerLeg.Suit_PantL:FindFirstChildOfClass("Weld").C1 = CFrame.new(0, -.25, 0)
			char.Ignore.FakeRightLowerLeg.Suit_PantR:FindFirstChildOfClass("Weld").C1 = CFrame.new(0, -.25, 0)
			
			char.LeftLowerArm.Material = Enum.Material.Air
			char.RightLowerArm.Material = Enum.Material.Air
			char.LeftLowerArm.Color = char.LeftHand.Color
			char.RightLowerArm.Color = char.LeftHand.Color
		elseif _G.dodconfig.custommorph == "wife" then
			local black = BrickColor.new("Black")
			local white = BrickColor.new("White")
		
			for _, part in ipairs(char:GetChildren()) do
				if part:IsA("MeshPart") then
					if not string.match(part.Name, "Hand") and part.Name ~= "Head" then
						part.BrickColor = black
					end
				end
			end
		
			local colorUpdates = {
				{
					char.Ignore.FakeUpperTorso.Kiryu_Suit,
					black
				},
				{
					char.Ignore.FakeLowerTorso.Kiryu_Tail,
					black
				},
				{
					char.Ignore.FakeLeftLowerArm.Suit_CuffL,
					black
				},
				{
					char.Ignore.FakeRightLowerArm.Suit_CuffR,
					black
				},
				{
					char.Ignore.FakeLeftLowerArm.Suit_CuffSL,
					white
				},
				{
					char.Ignore.FakeRightLowerArm.Suit_CuffSR,
					white
				},
				{
					char.Ignore.FakeUpperTorso.Kiryu_Shirt,
					white
				},
				{
					char.Ignore.FakeLowerTorso.Kiryu_BeltLoop,
					black
				},
				{
					char.Ignore.FakeLeftLowerLeg.Suit_PantL,
					white
				},
				{
					char.Ignore.FakeRightLowerLeg.Suit_PantR,
					white
				},
			}
			
			local remove = {
				char.Ignore.FakeLowerTorso.Kiryu_Belt,
				char.Ignore.FakeUpperTorso.Kiryu_Skin,
				char.Ignore.FakeLowerTorso.Kiryu_BeltLoop,
			}
			
			char.Ignore.FakeUpperTorso.Kiryu_Shirt.MeshId = "rbxassetid://7887792377"
			char.Ignore.FakeUpperTorso.Kiryu_Shirt:FindFirstChildOfClass("Weld").C0 = CFrame.new(-.013, .35, -.013)
			char.Ignore.FakeUpperTorso.Kiryu_Suit.MeshId = "rbxassetid://7887893054"
			char.Ignore.FakeUpperTorso.Kiryu_Suit:FindFirstChildOfClass("Weld").C0 = CFrame.new(-0.013, 0.175, -0.013)
			
			for _, v in ipairs(remove) do
				v:Destroy()
			end
		
			for _, update in ipairs(colorUpdates) do
				update[1].BrickColor = update[2]
			end
			
			char.LeftLowerLeg.Material = Enum.Material.Air
			char.RightLowerLeg.Material = Enum.Material.Air
			char.LeftLowerLeg.BrickColor = white
			char.RightLowerLeg.BrickColor = white
			char.LowerTorso.BrickColor = white
			
			char.LeftUpperLeg.Material = Enum.Material.Air
			char.RightUpperLeg.Material = Enum.Material.Air
			char.LeftUpperLeg.Color = char.LeftHand.Color
			char.RightUpperLeg.Color = char.LeftHand.Color
			
			char.LeftFoot.BrickColor = BrickColor.new("Brown")
			char.RightFoot.BrickColor = BrickColor.new("Brown")
			
			char.Ignore.FakeHead.face.Texture = "rbxassetid://94593544132121"
			char.Ignore.FakeHead.Kiryu_Hair.Mesh.MeshId = "rbxassetid://17764009887"
			char.Ignore.FakeHead.Kiryu_Hair.Mesh.TextureId = "http://www.roblox.com/asset/?id=16754807043"
			char.Ignore.FakeHead.Kiryu_Hair.Mesh.Offset = Vector3.new(0, -.9, .45)
			
			local skirt = char.Ignore.FakeUpperTorso.Kiryu_Shirt:Clone()
			skirt.Parent = char.Ignore.FakeLowerTorso
			skirt:FindFirstChildOfClass("Weld").Part0 = char.Ignore.FakeLowerTorso
			skirt:FindFirstChildOfClass("Weld").C0 = CFrame.new(0.013, -.2, -0.013)
			skirt.MeshId = "rbxassetid://12694062275"
			skirt.Size = Vector3.new(1.9, 1.5, 1.875)
			skirt.BrickColor = BrickColor.new("Light purple")
			
			local lSock = char.Ignore.FakeLeftLowerLeg.Suit_PantL:Clone()
			lSock.Parent = char.Ignore.FakeLeftLowerLeg
			lSock.MeshId = "rbxassetid://7893275269"
			lSock.Size = Vector3.new(0.615, 0.3075, 1.065)
			lSock:FindFirstChildOfClass("Weld").C0 = CFrame.new(0, 0.5, 0)
			
			local rSock = lSock:Clone()
			rSock.Parent = char.Ignore.FakeRightLowerLeg
			rSock:FindFirstChildOfClass("Weld").Part0 = char.Ignore.FakeRightLowerLeg
			
			local ears = char.Ignore.FakeHead.Kiryu_Hair:Clone()
			ears.Parent = char.Ignore.FakeHead
			ears.Mesh.MeshId = "rbxassetid://14207519041"
			ears.Mesh.TextureId = "rbxassetid://15511647263"
			ears.Mesh.Offset = Vector3.new(0, 1, -0.25)
		end
	end
end

morph()

char.HumanoidRootPart.Anchored = false

--voice mod
if _G.dodconfig.voice then
	if _G.dodconfig.useVoice == "ps2Kiryu" then
		loadstring(game:HttpGet("https://raw.githubusercontent.com/manythingsofthings/r2f-ps2kiryu-voice-mod/refs/heads/main/spaghetticode.lua"))()
	else
		loadstring(game:HttpGet("https://raw.githubusercontent.com/manythingsofthings/totally-legitimate-mm2-scripts/refs/heads/main/voice.lua"))()
	end
end

sendNotification("DRAGON STYLE LOADED", Color3.new(1, 0, 0), Color3.new(0, 0, 0), "HeatDepleted")

task.delay(5, function()
	ff:Destroy()
end)
